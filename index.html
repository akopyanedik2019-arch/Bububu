<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интерактивная система Юпитера</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        
        .container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        canvas {
            display: block;
            background: #000;
        }
        
        .ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
            background: rgba(0, 10, 30, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #2a4a7a;
            box-shadow: 0 0 20px rgba(0, 100, 255, 0.3);
            min-width: 220px;
        }
        
        h1 {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: #4af;
            text-shadow: 0 0 10px rgba(0, 150, 255, 0.7);
        }
        
        .counter {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff6;
            text-align: center;
            margin: 10px 0;
            text-shadow: 0 0 10px rgba(255, 200, 0, 0.7);
        }
        
        .instructions {
            font-size: 0.9rem;
            color: #aaf;
            line-height: 1.4;
            margin-top: 10px;
        }
        
        .explosion-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            font-weight: bold;
            color: #f00;
            text-shadow: 0 0 30px #ff0, 0 0 60px #f00;
            opacity: 0;
            z-index: 100;
            text-align: center;
            animation: pulse 1.5s infinite alternate;
        }
        
        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            100% { transform: translate(-50%, -50%) scale(1.1); }
        }
        
        .warning {
            color: #f88;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .ui {
                top: 10px;
                left: 10px;
                right: 10px;
                padding: 10px;
            }
            
            h1 {
                font-size: 1.2rem;
            }
            
            .explosion-text {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <canvas id="spaceCanvas"></canvas>
        <div class="ui">
            <h1>Интерактивная система Юпитера</h1>
            <div class="counter">Кликов: <span id="clickCount">0</span>/50</div>
            <div class="instructions">Кликайте по Юпитеру. После 50 кликов произойдет взрыв!</div>
            <div class="warning">Внимание: взрыв рассеет спутники!</div>
        </div>
        <div id="explosionText" class="explosion-text">Соси бибиджонус❤️</div>
    </div>

    <script>
        // Получаем элементы DOM
        const canvas = document.getElementById('spaceCanvas');
        const ctx = canvas.getContext('2d');
        const clickCountElement = document.getElementById('clickCount');
        const explosionText = document.getElementById('explosionText');
        
        // Настройки canvas
        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;
        
        // Переменные состояния
        let clickCount = 0;
        let explosionActive = false;
        let explosionTime = 0;
        const explosionDuration = 3000; // 3 секунды анимации взрыва
        let particles = [];
        
        // Настройки звездного фона
        const stars = [];
        const starCount = 400;
        
        // Настройки Юпитера
        const jupiter = {
            x: width / 2,
            y: height / 2,
            radius: Math.min(width, height) * 0.15,
            rotation: 0,
            rotationSpeed: 0.001,
            glow: 0
        };
        
        // Настройки спутников
        const moons = [
            { name: "Ио", distance: 180, radius: 8, speed: 0.02, angle: 0, color: "#ff9966", orbitColor: "rgba(255, 150, 100, 0.1)" },
            { name: "Европа", distance: 240, radius: 7, speed: 0.015, angle: Math.PI / 2, color: "#aaaaff", orbitColor: "rgba(170, 170, 255, 0.1)" },
            { name: "Ганимед", distance: 300, radius: 12, speed: 0.01, angle: Math.PI, color: "#cccccc", orbitColor: "rgba(200, 200, 200, 0.1)" },
            { name: "Каллисто", distance: 360, radius: 11, speed: 0.008, angle: 3 * Math.PI / 2, color: "#aaaaaa", orbitColor: "rgba(180, 180, 180, 0.1)" }
        ];
        
        // Настройки колец Юпитера
        const rings = {
            innerRadius: jupiter.radius * 1.5,
            outerRadius: jupiter.radius * 2.2,
            rotation: 0,
            rotationSpeed: 0.0005
        };
        
        // Инициализация звездного фона
        function initStars() {
            for (let i = 0; i < starCount; i++) {
                stars.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    size: Math.random() * 1.5 + 0.5,
                    brightness: Math.random() * 0.5 + 0.5,
                    twinkleSpeed: Math.random() * 0.05 + 0.01,
                    twinkleOffset: Math.random() * Math.PI * 2
                });
            }
        }
        
        // Создание частиц для взрыва
        function createExplosionParticles() {
            particles = [];
            const particleCount = 300;
            
            for (let i = 0; i < particleCount; i++) {
                // Разные типы частиц для разнообразия
                const type = Math.random() > 0.7 ? "fire" : Math.random() > 0.5 ? "gas" : "debris";
                
                let color;
                switch(type) {
                    case "fire": color = `hsl(${30 + Math.random() * 20}, 100%, 60%)`; break;
                    case "gas": color = `hsl(${200 + Math.random() * 40}, 80%, 70%)`; break;
                    default: color = `hsl(${10 + Math.random() * 30}, 60%, 50%)`;
                }
                
                particles.push({
                    x: jupiter.x,
                    y: jupiter.y,
                    vx: (Math.random() - 0.5) * 15,
                    vy: (Math.random() - 0.5) * 15,
                    radius: Math.random() * 6 + 2,
                    color: color,
                    life: 1.0,
                    decay: Math.random() * 0.02 + 0.005,
                    type: type,
                    rotation: Math.random() * Math.PI * 2,
                    rotationSpeed: (Math.random() - 0.5) * 0.2
                });
            }
        }
        
        // Обработчик изменения размера окна
        function handleResize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            
            // Обновляем позицию Юпитера
            jupiter.x = width / 2;
            jupiter.y = height / 2;
            jupiter.radius = Math.min(width, height) * 0.15;
            
            // Обновляем параметры колец
            rings.innerRadius = jupiter.radius * 1.5;
            rings.outerRadius = jupiter.radius * 2.2;
        }
        
        // Обработчик клика по canvas
        function handleCanvasClick(e) {
            if (explosionActive) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Проверяем, кликнули ли по Юпитеру
            const distance = Math.sqrt((x - jupiter.x) ** 2 + (y - jupiter.y) ** 2);
            
            if (distance <= jupiter.radius * 1.2) { // Немного больше радиуса для удобства
                clickCount++;
                clickCountElement.textContent = clickCount;
                
                // Эффект при клике - свечение
                jupiter.glow = 1.0;
                
                // Если достигли 50 кликов - активируем взрыв
                if (clickCount >= 50) {
                    activateExplosion();
                }
            }
        }
        
        // Активация взрыва
        function activateExplosion() {
            explosionActive = true;
            explosionTime = 0;
            explosionText.style.opacity = 1;
            createExplosionParticles();
            
            // Рассеиваем спутники
            moons.forEach(moon => {
                moon.scattered = true;
                moon.scatterVX = (Math.random() - 0.5) * 8;
                moon.scatterVY = (Math.random() - 0.5) * 8;
                moon.scatterRotation = (Math.random() - 0.5) * 0.1;
            });
        }
        
        // Отрисовка звездного фона
        function drawStars() {
            ctx.fillStyle = "#000";
            ctx.fillRect(0, 0, width, height);
            
            const time = Date.now() * 0.001;
            
            stars.forEach(star => {
                const twinkle = Math.sin(time * star.twinkleSpeed + star.twinkleOffset) * 0.3 + 0.7;
                ctx.fillStyle = `rgba(255, 255, 255, ${star.brightness * twinkle})`;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
            });
        }
        
        // Отрисовка орбит спутников
        function drawOrbits() {
            moons.forEach(moon => {
                ctx.strokeStyle = moon.orbitColor;
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.ellipse(jupiter.x, jupiter.y, moon.distance, moon.distance * 0.7, 0, 0, Math.PI * 2);
                ctx.stroke();
            });
        }
        
        // Отрисовка колец Юпитера
        function drawRings() {
            const gradient = ctx.createRadialGradient(
                jupiter.x, jupiter.y, rings.innerRadius,
                jupiter.x, jupiter.y, rings.outerRadius
            );
            gradient.addColorStop(0, 'rgba(150, 150, 200, 0.05)');
            gradient.addColorStop(0.5, 'rgba(180, 180, 220, 0.15)');
            gradient.addColorStop(1, 'rgba(150, 150, 200, 0.05)');
            
            ctx.save();
            ctx.translate(jupiter.x, jupiter.y);
            ctx.rotate(rings.rotation);
            ctx.translate(-jupiter.x, -jupiter.y);
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.ellipse(jupiter.x, jupiter.y, rings.outerRadius, rings.outerRadius * 0.2, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.restore();
        }
        
        // Отрисовка Юпитера
        function drawJupiter() {
            // Свечение Юпитера
            if (jupiter.glow > 0) {
                const gradient = ctx.createRadialGradient(
                    jupiter.x, jupiter.y, 0,
                    jupiter.x, jupiter.y, jupiter.radius * 2
                );
                gradient.addColorStop(0, `rgba(100, 150, 255, ${0.3 * jupiter.glow})`);
                gradient.addColorStop(1, 'rgba(100, 150, 255, 0)');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(jupiter.x, jupiter.y, jupiter.radius * 2, 0, Math.PI * 2);
                ctx.fill();
                
                // Уменьшаем свечение со временем
                jupiter.glow -= 0.02;
                if (jupiter.glow < 0) jupiter.glow = 0;
            }
            
            // Основной диск Юпитера
            const gradient = ctx.createRadialGradient(
                jupiter.x - jupiter.radius/3, jupiter.y - jupiter.radius/3, 0,
                jupiter.x, jupiter.y, jupiter.radius
            );
            gradient.addColorStop(0, '#f9d17e');
            gradient.addColorStop(0.3, '#d8a85a');
            gradient.addColorStop(0.6, '#b88646');
            gradient.addColorStop(1, '#8b5a2b');
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(jupiter.x, jupiter.y, jupiter.radius, 0, Math.PI * 2);
            ctx.fill();
            
            // Полосы на Юпитере
            ctx.save();
            ctx.translate(jupiter.x, jupiter.y);
            ctx.rotate(jupiter.rotation);
            
            // Темные полосы
            ctx.fillStyle = '#8b5a2b';
            for (let i = -4; i <= 4; i++) {
                const bandHeight = jupiter.radius * 0.1;
                const bandY = i * jupiter.radius * 0.25;
                
                ctx.beginPath();
                ctx.ellipse(0, bandY, jupiter.radius * 0.9, bandHeight, 0, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Большое Красное Пятно
            ctx.fillStyle = '#cc5533';
            ctx.beginPath();
            ctx.ellipse(jupiter.radius * 0.5, -jupiter.radius * 0.2, jupiter.radius * 0.3, jupiter.radius * 0.15, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Детализация пятна
            ctx.fillStyle = '#aa4422';
            ctx.beginPath();
            ctx.ellipse(jupiter.radius * 0.5, -jupiter.radius * 0.2, jupiter.radius * 0.25, jupiter.radius * 0.1, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.restore();
            
            // Обводка для выделения
            ctx.strokeStyle = 'rgba(200, 200, 255, 0.2)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(jupiter.x, jupiter.y, jupiter.radius, 0, Math.PI * 2);
            ctx.stroke();
        }
        
        // Отрисовка спутников
        function drawMoons() {
            moons.forEach(moon => {
                // Если взрыв активен и спутник рассеивается
                if (explosionActive && moon.scattered) {
                    moon.x += moon.scatterVX;
                    moon.y += moon.scatterVY;
                    moon.scatterVY += 0.05; // Гравитация
                    moon.angle += moon.scatterRotation;
                } else {
                    // Нормальное орбитальное движение
                    moon.angle += moon.speed;
                    moon.x = jupiter.x + Math.cos(moon.angle) * moon.distance;
                    moon.y = jupiter.y + Math.sin(moon.angle) * moon.distance * 0.7;
                }
                
                // Тень спутника
                ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
                ctx.beginPath();
                ctx.arc(moon.x + moon.radius * 0.3, moon.y + moon.radius * 0.3, moon.radius, 0, Math.PI * 2);
                ctx.fill();
                
                // Основной диск спутника
                const gradient = ctx.createRadialGradient(
                    moon.x - moon.radius/2, moon.y - moon.radius/2, 0,
                    moon.x, moon.y, moon.radius
                );
                gradient.addColorStop(0, moon.color);
                gradient.addColorStop(1, darkenColor(moon.color, 40));
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(moon.x, moon.y, moon.radius, 0, Math.PI * 2);
                ctx.fill();
                
                // Детали на спутниках
                ctx.fillStyle = darkenColor(moon.color, 20);
                ctx.beginPath();
                ctx.arc(moon.x - moon.radius * 0.3, moon.y - moon.radius * 0.2, moon.radius * 0.4, 0, Math.PI * 2);
                ctx.fill();
                
                // Обводка спутника
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.arc(moon.x, moon.y, moon.radius, 0, Math.PI * 2);
                ctx.stroke();
                
                // Название спутника (только если не рассеивается)
                if (!explosionActive || !moon.scattered) {
                    ctx.fillStyle = '#aaf';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(moon.name, moon.x, moon.y - moon.radius - 10);
                }
            });
        }
        
        // Отрисовка частиц взрыва
        function drawParticles() {
            particles.forEach((particle, index) => {
                // Обновляем позицию частицы
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.life -= particle.decay;
                particle.rotation += particle.rotationSpeed;
                
                // Если частица "мертва", удаляем ее
                if (particle.life <= 0) {
                    particles.splice(index, 1);
                    return;
                }
                
                // Рисуем частицу
                ctx.save();
                ctx.translate(particle.x, particle.y);
                ctx.rotate(particle.rotation);
                
                if (particle.type === "fire") {
                    // Огненные частицы
                    const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, particle.radius);
                    gradient.addColorStop(0, `rgba(255, 200, 0, ${particle.life})`);
                    gradient.addColorStop(1, `rgba(255, 50, 0, 0)`);
                    
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(0, 0, particle.radius, 0, Math.PI * 2);
                    ctx.fill();
                } else if (particle.type === "gas") {
                    // Газовые частицы
                    ctx.fillStyle = `rgba(100, 200, 255, ${particle.life * 0.7})`;
                    ctx.beginPath();
                    ctx.arc(0, 0, particle.radius, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    // Обломки
                    ctx.fillStyle = `rgba(139, 90, 43, ${particle.life})`;
                    ctx.beginPath();
                    ctx.rect(-particle.radius, -particle.radius, particle.radius * 2, particle.radius * 2);
                    ctx.fill();
                }
                
                ctx.restore();
            });
        }
        
        // Функция для затемнения цвета
        function darkenColor(color, percent) {
            const num = parseInt(color.replace("#", ""), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) - amt;
            const G = (num >> 8 & 0x00FF) - amt;
            const B = (num & 0x0000FF) - amt;
            
            return "#" + (
                0x1000000 + 
                (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + 
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + 
                (B < 255 ? B < 1 ? 0 : B : 255)
            ).toString(16).slice(1);
        }
        
        // Основной цикл анимации
        function animate() {
            // Очищаем canvas через отрисовку звезд
            drawStars();
            
            // Обновляем вращение
            jupiter.rotation += jupiter.rotationSpeed;
            rings.rotation += rings.rotationSpeed;
            
            // Если взрыв активен
            if (explosionActive) {
                explosionTime += 16; // Примерно 60 FPS
                
                // Если время взрыва истекло
                if (explosionTime >= explosionDuration) {
                    explosionActive = false;
                    explosionText.style.opacity = 0;
                    clickCount = 0;
                    clickCountElement.textContent = clickCount;
                }
            }
            
            // Рисуем элементы системы
            drawOrbits();
            drawRings();
            drawJupiter();
            drawMoons();
            
            // Если активен взрыв, рисуем частицы
            if (explosionActive) {
                drawParticles();
            }
            
            // Запрашиваем следующий кадр
            requestAnimationFrame(animate);
        }
        
        // Инициализация
        function init() {
            initStars();
            handleResize();
            
            // Добавляем обработчики событий
            window.addEventListener('resize', handleResize);
            canvas.addEventListener('click', handleCanvasClick);
            
            // Запускаем анимацию
            animate();
        }
        
        // Запускаем приложение после загрузки страницы
        window.addEventListener('load', init);
    </script>
</body>
</html>